# “command” is your build command.
# “publish” is the directory to publish (relative to the root of your repo).
[build]
  command = "CI=true npm run test && npm run build"
  publish = "build"

# Deploy Preview context: All deploys generated from a pull/merge request
# will inherit these settings.
[context.deploy-preview.environment]
  REACT_APP_CLIENT_ID = process.env.REACT_APP_STAGE_CLIENT_ID
# Not so secret after all 
  REACT_APP_CLIENT_SECRET = process.env.REACT_APP_STAGE_CLIENT_SECRET

# Branch deploy context: All deploys that are not from a pull/merge request
# or from the production branch will inherit these settings.
[context.branch-deploy.environment]
  REACT_APP_CLIENT_ID = process.env.REACT_APP_STAGE_CLIENT_ID
# Not so secret after all 
  REACT_APP_CLIENT_SECRET = process.env.REACT_APP_STAGE_CLIENT_SECRET